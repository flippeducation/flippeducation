extends default

mixin form-control(name, display_name, required, ctrlType, autocomplete="on", options=[])
  - const jsName = name.replace(/-/g, "_")
  .pure-u-1-2.pure-u-md-1-4.form-control-label
    label(for=`submit-form-${name}`)
      =display_name
      if required
        span.required *
      | :
  .pure-u-1-2.pure-u-md-1-4.form-control
    case ctrlType
      when "select"
        select(
          id=`submit-form-${name}` name=jsName
          autocomplete=autocomplete
        )
          - for ([opt_name, opt_display_name] of options)
            option(
              value=opt_name.replace("-", "_")
              selected=query[jsName] === opt_name
            )
              =`${opt_display_name} (${opt_name})`
      when "textarea"
        textarea(
          id=`submit-form-${name}` name=jsName
          autocomplete=autocomplete
        )
          =query[jsName] || ""
      default: input(
        id=`submit-form-${name}` type=ctrlType
        name=jsName
        autocomplete=autocomplete
        value=query[jsName] || ""
      )
  .pure-u-md-1-2

append head
  link(rel="stylesheet" type="text/css" href="/css/submit.css")
block content
  p!= __("Fields marked with a %s are required.", '<span class="required">*</span>')
  form(action="/submit", method="post")
    .pure-g
      +form-control(
        "name", __("Video name"), true, "text"
      )
      +form-control(
        "language", __("Language"), true, "select", autocomplete="language",
        options=[
          ["en", "English"], ["zh", "中文"], ["pt", "português"]
        ]
      )
      +form-control(
        "lecturer-name", __("Lecturer full name"), false, "text",
        autocomplete="name"
      )
      +form-control(
        "lecturer-display-name", __("Lecturer display name (must be unique)"),
        true, "text", autocomplete="username"
      )
      +form-control(
        "topics", __("Topic(s) (e.g. %s)", __("partial fractions")),
        false, "text"
      )
      +form-control(
        "subjects",
        __("Subject(s) (e.g. %s, %s)", __("calculus"), __("AP Calculus BC")),
        false, "text"
      )
      +form-control(
        "url", __("Video URL"), true, "text", autocomplete="url"
      )
      +form-control(
        "grade-level", __("Grade level / experience level"), false, "text"
      )
      +form-control(
        "notes", __("Any other notes"), false, "textarea"
      )
      .pure-u-1-2.pure-u-md-1-4.form-control-label#phone-number-label
        label(for="submit-form-phone-number")
          | Phone number at which to contact you
          span.required *
          | :
      .pure-u-1-2.pure-u-md-1-4.form-control
        input(
          id="submit-form-phone-number" type="text"
          name="phone_number" autocomplete="off" tabindex="-1"
        )
      .pure-u-md-1-2

      .pure-u-1-2.pure-u-md-1-4
      .pure-u-1-2.pure-u-md-1-4
        input#submit-form-submit(type="submit" value=__("Submit"))
      .pure-u-md-1-2
